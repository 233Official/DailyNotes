import{_ as p}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as i,o as u,c as m,a,d as t,b as e,w as s,e as l}from"./app-BT-bWAve.js";const d={},h=l('<h1 id="java-web" tabindex="-1"><a class="header-anchor" href="#java-web"><span>Java Web</span></a></h1><ul><li><a href="#java-web">Java Web</a><ul><li><a href="#servlet%E5%AE%B9%E5%99%A8">Servlet容器</a><ul><li><a href="#tomcat">Tomcat</a><ul><li><a href="#tomcat%E5%AE%89%E8%A3%85">Tomcat安装</a></li><li><a href="#tomcat%E9%85%8D%E7%BD%AE">Tomcat配置</a></li><li><a href="#%E9%80%9A%E8%BF%87docker%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BA%E4%B8%8E%E4%BD%BF%E7%94%A8tomcat%E7%8E%AF%E5%A2%83">通过Docker快速搭建与使用Tomcat环境</a></li><li><a href="#%E6%97%A5%E5%BF%97">日志</a></li></ul></li><li><a href="#jetty">Jetty</a></li></ul></li></ul></li></ul><hr><h2 id="servlet容器" tabindex="-1"><a class="header-anchor" href="#servlet容器"><span>Servlet容器</span></a></h2><hr><h3 id="tomcat" tabindex="-1"><a class="header-anchor" href="#tomcat"><span>Tomcat</span></a></h3>',6),g={href:"https://tomcat.apache.org/",target:"_blank",rel:"noopener noreferrer"},b={href:"https://projects.eclipse.org/projects/ee4j.servlet",target:"_blank",rel:"noopener noreferrer"},v={href:"https://projects.eclipse.org/projects/ee4j.jsp",target:"_blank",rel:"noopener noreferrer"},k={href:"https://projects.eclipse.org/projects/ee4j.el",target:"_blank",rel:"noopener noreferrer"},_={href:"https://projects.eclipse.org/projects/ee4j.websocket",target:"_blank",rel:"noopener noreferrer"},f={href:"https://projects.eclipse.org/projects/ee4j.ca",target:"_blank",rel:"noopener noreferrer"},y={href:"https://projects.eclipse.org/projects/ee4j.authentication",target:"_blank",rel:"noopener noreferrer"},T={href:"https://projects.eclipse.org/projects/ee4j.jakartaee-platform",target:"_blank",rel:"noopener noreferrer"},E=l('<blockquote><p>Jakarta EE 平台是 Java EE 平台的演变。Tomcat 10 及更高版本实现了作为 Jakarta EE 的一部分开发的规范。Tomcat 9 及更早版本实现了作为 Java EE 的一部分开发的规范。</p></blockquote><p><strong>特点</strong>：</p><ul><li>是一个较为成熟且广泛使用的 Java Servlet 容器。</li><li>提供对 Java EE 规范中 Servlets 和 JSP 的完整支持。</li><li>支持大多数 Java Web 应用程序的运行，适合中小型应用。</li><li>配置相对灵活，功能丰富，包括集成了 JNDI、WebSocket、JSP 编译等功能。</li><li>适合需要一个稳定且功能强大的 Java Web 服务器的应用场景。</li></ul><p><strong>使用场景</strong>：大多数企业级 Web 应用的开发和部署，特别是中小型项目。</p><hr><h4 id="tomcat安装" tabindex="-1"><a class="header-anchor" href="#tomcat安装"><span>Tomcat安装</span></a></h4>',6),A={href:"https://tomcat.apache.org/download-80.cgi",target:"_blank",rel:"noopener noreferrer"},x=a("p",null,[a("img",{src:"http://cdn.ayusummer233.top/DailyNotes/202306131112390.png",alt:"image-20230613111231319"})],-1),J=a("hr",null,null,-1),j=a("p",null,"Windows 下直接下 Installer 版本即可",-1),D=a("p",null,[a("img",{src:"http://cdn.ayusummer233.top/DailyNotes/202306131113262.png",alt:"image-20230613111315190"})],-1),w=a("p",null,[t("安装时会默认 "),a("code",null,"Server Shutdown Port "),t(" 为 "),a("code",null,"-1"),t(", 意味着关闭了监听 shutdown 命令的端口, 后续启停可以在 Windows 服务("),a("code",null,"services.msc"),t(")中进行操作")],-1),W=a("p",null,[a("img",{src:"http://cdn.ayusummer233.top/DailyNotes/202409111130092.png",alt:"image-20240911113034865"})],-1),N=a("p",null,[a("img",{src:"http://cdn.ayusummer233.top/DailyNotes/202409111136271.png",alt:"image-20240911113602199"})],-1),S=a("p",null,[a("img",{src:"http://cdn.ayusummer233.top/DailyNotes/202409111136185.png",alt:"image-20240911113638114"})],-1),B=a("p",null,"安装完成会自动启动:",-1),P=a("p",null,[a("img",{src:"http://cdn.ayusummer233.top/DailyNotes/202409111412187.png",alt:"image-20240911141212043"})],-1),q=a("p",null,[a("img",{src:"http://cdn.ayusummer233.top/DailyNotes/202409111412947.png",alt:"image-20240911141233887"})],-1),C=a("p",null,[t("也可以使用 Tomcat 安装目录中的 "),a("code",null,"bin/startup.bat"),t(" 启动 Tomcat")],-1),I=a("p",null,[t("可以访问 "),a("code",null,"http://localhost:8080/"),t(" 如果显示如下页面则表明 Tomcat 安装成功")],-1),F=a("p",null,[a("img",{src:"http://cdn.ayusummer233.top/DailyNotes/202409111427788.png",alt:"image-20240911142749708"})],-1),H=a("hr",null,null,-1),L={href:"https://segmentfault.com/a/1190000043079401#item-2",target:"_blank",rel:"noopener noreferrer"},M={href:"https://tomcat.apache.org/download-90.cgi",target:"_blank",rel:"noopener noreferrer"},O=a("p",null,"下载如下压缩包:",-1),R=a("p",null,[a("img",{src:"http://cdn.ayusummer233.top/DailyNotes/202409111539652.png",alt:"image-20240911153916523"})],-1),V=a("div",{class:"language-bash line-numbers-mode","data-ext":"sh","data-title":"sh"},[a("pre",{class:"language-bash"},[a("code",null,[a("span",{class:"token function"},"wget"),t(` https://dlcdn.apache.org/tomcat/tomcat-9/v9.0.94/bin/apache-tomcat-9.0.94.tar.gz
`)])]),a("div",{class:"line-numbers","aria-hidden":"true"},[a("div",{class:"line-number"})])],-1),$=a("div",{class:"language-bash line-numbers-mode","data-ext":"sh","data-title":"sh"},[a("pre",{class:"language-bash"},[a("code",null,[a("span",{class:"token comment"},"# 在 /opt 目录中新建一个目录(/opt 目录通常用于存放“可选”或第三方的软件包)"),t(`
`),a("span",{class:"token function"},"mkdir"),t(` /opt/tomcat
`),a("span",{class:"token comment"},"# 在 /opt/tomcat 路径中使用 tar 命令提取二进制文件"),t(`
`),a("span",{class:"token function"},"sudo"),t(),a("span",{class:"token function"},"tar"),t(),a("span",{class:"token parameter variable"},"-xvf"),t(" apache-tomcat-9.0.94.tar.gz "),a("span",{class:"token parameter variable"},"-C"),t(" /opt/tomcat --strip-components"),a("span",{class:"token operator"},"="),a("span",{class:"token number"},"1"),t(`
`)])]),a("div",{class:"line-numbers","aria-hidden":"true"},[a("div",{class:"line-number"}),a("div",{class:"line-number"}),a("div",{class:"line-number"}),a("div",{class:"line-number"})])],-1),X=a("ul",null,[a("li",null,[a("p",null,[a("code",null,"--strip-components=1"),t("：")]),a("ul",null,[a("li",null,[a("p",null,[t("这个选项用于删除归档文件路径中的前 N 层目录。"),a("code",null,"1"),t(" 表示删除路径中的第一层目录。")])]),a("li",null,[a("p",null,[t("压缩包中的文件路径为 "),a("code",null,"apache-tomcat-9.0.94/bin/"),t(", "),a("code",null,"apache-tomcat-9.0.94/conf/"),t(" 等")]),a("p",null,[t("使用 "),a("code",null,"--strip-components=1"),t(" 之后解压到 "),a("code",null,"/opt/tomcat"),t(" 时，这些文件会直接解压到 "),a("code",null,"/opt/tomcat/bin/"),t("，"),a("code",null,"/opt/tomcat/conf/"),t("，去掉了最外层的 "),a("code",null,"apache-tomcat-9.0.94"),t(" 目录")])])])])],-1),z=a("hr",null,null,-1),U=a("p",null,"为 Tomcat 创建一个新的用户组",-1),G=a("div",{class:"language-bash line-numbers-mode","data-ext":"sh","data-title":"sh"},[a("pre",{class:"language-bash"},[a("code",null,[a("span",{class:"token comment"},"# 创建一个名为 tomcat 的组"),t(`
`),a("span",{class:"token function"},"sudo"),t(),a("span",{class:"token function"},"groupadd"),t(` tomcat
`),a("span",{class:"token comment"},"# 创建 tomcat 用户，并将用户添加到 tomcat 组中，以 /opt /tomcat 作为主目录"),t(`
`),a("span",{class:"token function"},"sudo"),t(),a("span",{class:"token function"},"useradd"),t(),a("span",{class:"token parameter variable"},"-s"),t(" /bin/false "),a("span",{class:"token parameter variable"},"-g"),t(" tomcat "),a("span",{class:"token parameter variable"},"-d"),t(` /opt/tomcat tomcat
`)])]),a("div",{class:"line-numbers","aria-hidden":"true"},[a("div",{class:"line-number"}),a("div",{class:"line-number"}),a("div",{class:"line-number"}),a("div",{class:"line-number"})])],-1),K=a("ul",null,[a("li",null,[a("code",null,"-s /bin/false"),t(": 设置用户的登录 shell 为 "),a("code",null,"/bin/false"),t("，这意味着该用户无法登录到系统")]),a("li",null,[a("code",null,"-g tomcat"),t(": 将该用户加入到已有的 "),a("code",null,"tomcat"),t(" 组中")]),a("li",null,[a("code",null,"-d /opt/tomcat"),t(": 设置用户的主目录为 "),a("code",null,"/opt/tomcat")]),a("li",null,[a("code",null,"tomcat"),t(": 要创建的新用户的用户名")])],-1),Q=a("hr",null,null,-1),Y=a("p",null,"配置用户权限:",-1),Z=a("p",null,"使用 Chown 和 Chomd 命令给 /opt /tomcat 目录设置用户和权限",-1),aa=a("div",{class:"language-bash line-numbers-mode","data-ext":"sh","data-title":"sh"},[a("pre",{class:"language-bash"},[a("code",null,[a("span",{class:"token function"},"sudo"),t(),a("span",{class:"token function"},"chown"),t(),a("span",{class:"token parameter variable"},"-R"),t(` tomcat: /opt/tomcat
`),a("span",{class:"token function"},"sudo"),t(),a("span",{class:"token function"},"sh"),t(),a("span",{class:"token parameter variable"},"-c"),t(),a("span",{class:"token string"},"'chmod +x /opt/tomcat/bin/*.sh'"),t(`
`)])]),a("div",{class:"line-numbers","aria-hidden":"true"},[a("div",{class:"line-number"}),a("div",{class:"line-number"})])],-1),ta=a("ul",null,[a("li",null,[a("code",null,"chown"),t(": 用于更改文件或目录的所有者 "),a("ul",null,[a("li",null,[a("code",null,"-R"),t(": 表示递归操作，将更改应用于目录下的所有子目录和文件。")]),a("li",null,[a("code",null,"tomcat:"),t(": 指定新的文件或目录的拥有者为 "),a("code",null,"tomcat"),t(" 用户。后面的冒号表示没有指定组名，默认使用 "),a("code",null,"tomcat"),t(" 用户的主组。")]),a("li",null,[a("code",null,"/opt/tomcat"),t(" 目标目录，即要更改拥有者的目录。")])])]),a("li",null,[a("code",null,"sh -c"),t(": 使用 "),a("code",null,"sh"),t(" shell 执行后面引号中的命令。"),a("code",null,"-c"),t(" 表示执行字符串中的命令 "),a("ul",null,[a("li",null,[a("code",null,"chmod +x"),t(": 改变文件模式命令，使文件具有可执行权限 ("),a("code",null,"+x"),t(")")]),a("li",null,[a("code",null,"/opt/tomcat/bin/*.sh"),t(": 目标是 "),a("code",null,"/opt/tomcat/bin/"),t(" 目录中的所有 "),a("code",null,".sh"),t(" 脚本文件（"),a("code",null,"*.sh"),t(" 是匹配所有 "),a("code",null,".sh"),t(" 文件的通配符）")])])])],-1),ea=a("hr",null,null,-1),na=a("p",null,"我们需要使 Apache Tomcat 作为一个可以启动、停止和启用的系统服务在后台运行",-1),sa=a("p",null,"默认情况下，Tomcat 不附带 systemd 单元文件，因此，我们将手动创建它，如下所示",-1),la=a("div",{class:"language-bash line-numbers-mode","data-ext":"sh","data-title":"sh"},[a("pre",{class:"language-bash"},[a("code",null,[a("span",{class:"token function"},"sudo"),t(),a("span",{class:"token function"},"vi"),t(` /etc/systemd/system/tomcat.service
`),a("span",{class:"token comment"},"# 有 VSCode 之类的编辑器编辑的话可以直接 touch 空文件"),t(`
`),a("span",{class:"token function"},"touch"),t(` /etc/systemd/system/tomcat.service
`)])]),a("div",{class:"line-numbers","aria-hidden":"true"},[a("div",{class:"line-number"}),a("div",{class:"line-number"}),a("div",{class:"line-number"})])],-1),oa=a("p",null,"填入如下内容:",-1),ca=a("div",{class:"language-properties line-numbers-mode","data-ext":"properties","data-title":"properties"},[a("pre",{class:"language-properties"},[a("code",null,[t(`[Unit]
`),a("span",{class:"token key attr-name"},"Description"),a("span",{class:"token punctuation"},"="),a("span",{class:"token value attr-value"},"Tomcat webs servlet container"),t(`
`),a("span",{class:"token key attr-name"},"After"),a("span",{class:"token punctuation"},"="),a("span",{class:"token value attr-value"},"network.target"),t(`
[Service]
`),a("span",{class:"token key attr-name"},"Type"),a("span",{class:"token punctuation"},"="),a("span",{class:"token value attr-value"},"forking"),t(`
`),a("span",{class:"token key attr-name"},"User"),a("span",{class:"token punctuation"},"="),a("span",{class:"token value attr-value"},"tomcat"),t(`
`),a("span",{class:"token key attr-name"},"Group"),a("span",{class:"token punctuation"},"="),a("span",{class:"token value attr-value"},"tomcat"),t(`
`),a("span",{class:"token key attr-name"},"RestartSec"),a("span",{class:"token punctuation"},"="),a("span",{class:"token value attr-value"},"10"),t(`
`),a("span",{class:"token key attr-name"},"Restart"),a("span",{class:"token punctuation"},"="),a("span",{class:"token value attr-value"},"always"),t(`
`),a("span",{class:"token key attr-name"},"Environment"),a("span",{class:"token punctuation"},"="),a("span",{class:"token value attr-value"},'"JAVA_HOME=/usr/lib/jvm/java-1.11.0-openjdk-amd64"'),t(`
`),a("span",{class:"token key attr-name"},"Environment"),a("span",{class:"token punctuation"},"="),a("span",{class:"token value attr-value"},'"JAVA_OPTS=-Djava.awt.headless=true -Djava.security.egd=file:/dev/./urandom"'),t(`
`),a("span",{class:"token key attr-name"},"Environment"),a("span",{class:"token punctuation"},"="),a("span",{class:"token value attr-value"},'"CATALINA_BASE=/opt/tomcat"'),t(`
`),a("span",{class:"token key attr-name"},"Environment"),a("span",{class:"token punctuation"},"="),a("span",{class:"token value attr-value"},'"CATALINA_HOME=/opt/tomcat"'),t(`
`),a("span",{class:"token key attr-name"},"Environment"),a("span",{class:"token punctuation"},"="),a("span",{class:"token value attr-value"},'"CATALINA_PID=/opt/tomcat/temp/tomcat.pid"'),t(`
`),a("span",{class:"token key attr-name"},"Environment"),a("span",{class:"token punctuation"},"="),a("span",{class:"token value attr-value"},'"CATALINA_OPTS=-Xms512M -Xmx1024M -server -XX:+UseParallelGC"'),t(`
`),a("span",{class:"token key attr-name"},"ExecStart"),a("span",{class:"token punctuation"},"="),a("span",{class:"token value attr-value"},"/opt/tomcat/bin/startup.sh"),t(`
`),a("span",{class:"token key attr-name"},"ExecStop"),a("span",{class:"token punctuation"},"="),a("span",{class:"token value attr-value"},"/opt/tomcat/bin/shutdown.sh"),t(`
[Install]
`),a("span",{class:"token key attr-name"},"WantedBy"),a("span",{class:"token punctuation"},"="),a("span",{class:"token value attr-value"},"multi-user.target"),t(`
`)])]),a("div",{class:"line-numbers","aria-hidden":"true"},[a("div",{class:"line-number"}),a("div",{class:"line-number"}),a("div",{class:"line-number"}),a("div",{class:"line-number"}),a("div",{class:"line-number"}),a("div",{class:"line-number"}),a("div",{class:"line-number"}),a("div",{class:"line-number"}),a("div",{class:"line-number"}),a("div",{class:"line-number"}),a("div",{class:"line-number"}),a("div",{class:"line-number"}),a("div",{class:"line-number"}),a("div",{class:"line-number"}),a("div",{class:"line-number"}),a("div",{class:"line-number"}),a("div",{class:"line-number"}),a("div",{class:"line-number"}),a("div",{class:"line-number"})])],-1),ia=a("blockquote",null,[a("p",null,"上述 Java 路径可以按照需要自行配置, 使用如下命令可以查看当前 Java 路径:"),a("div",{class:"language-bash line-numbers-mode","data-ext":"sh","data-title":"sh"},[a("pre",{class:"language-bash"},[a("code",null,[t("update-java-alternatives "),a("span",{class:"token parameter variable"},"-l"),t(`
`),a("span",{class:"token comment"},"# 或者:"),t(`
update-alternatives `),a("span",{class:"token parameter variable"},"--config"),t(),a("span",{class:"token function"},"java"),t(`
`)])]),a("div",{class:"line-numbers","aria-hidden":"true"},[a("div",{class:"line-number"}),a("div",{class:"line-number"}),a("div",{class:"line-number"})])]),a("p",null,[a("img",{src:"http://cdn.ayusummer233.top/DailyNotes/202409111610955.png",alt:"image-20240911161009846"})])],-1),ra=a("p",null,"保存更改并退出文件，然后重新运行 systemd 生成器并重新加载所有单元文件。",-1),pa=a("div",{class:"language-bash line-numbers-mode","data-ext":"sh","data-title":"sh"},[a("pre",{class:"language-bash"},[a("code",null,[t("$ "),a("span",{class:"token function"},"sudo"),t(` systemctl daemon-reload
`)])]),a("div",{class:"line-numbers","aria-hidden":"true"},[a("div",{class:"line-number"})])],-1),ua=a("hr",null,null,-1),ma=a("p",null,"启用并启动 Tomcat 守护进程",-1),da=a("p",null,"准备好 Tomcat 的 systemd 文件后，启动 Apache Tomcat 守护进程，并使其在系统启动时启动",-1),ha=a("div",{class:"language-bash line-numbers-mode","data-ext":"sh","data-title":"sh"},[a("pre",{class:"language-bash"},[a("code",null,[t("$ "),a("span",{class:"token function"},"sudo"),t(` systemctl daemon-reload
$ `),a("span",{class:"token function"},"sudo"),t(` systemctl start tomcat
`),a("span",{class:"token comment"},"# systemctl start tomcat 总是失败的话可以直接运行如下启动脚本启动"),t(`
/opt/tomcat/bin/startup.sh

$ `),a("span",{class:"token function"},"sudo"),t(" systemctl "),a("span",{class:"token builtin class-name"},"enable"),t(` tomcat
`)])]),a("div",{class:"line-numbers","aria-hidden":"true"},[a("div",{class:"line-number"}),a("div",{class:"line-number"}),a("div",{class:"line-number"}),a("div",{class:"line-number"}),a("div",{class:"line-number"}),a("div",{class:"line-number"})])],-1),ga=a("hr",null,null,-1),ba=a("p",null,"添加 Tomcat Admin 用户并配置角色",-1),va=a("p",null,"我们需要配置一个管理用户来访问 Tomcat web 页面上的服务器状态、主机管理器和管理器应用程序部分。否则，我们将在浏览器上遇到错误。",-1),ka=a("p",null,"为此，我们将编辑 Tomcat 用户配置文件",-1),_a=a("div",{class:"language-bash line-numbers-mode","data-ext":"sh","data-title":"sh"},[a("pre",{class:"language-bash"},[a("code",null,[t("$ "),a("span",{class:"token function"},"sudo"),t(),a("span",{class:"token function"},"vi"),t(` /opt/tomcat/conf/tomcat-users.xml
`)])]),a("div",{class:"line-numbers","aria-hidden":"true"},[a("div",{class:"line-number"})])],-1),fa=a("p",null,[t("在 "),a("code",null,"</tomcat-users>"),t(" 标签之前粘贴以下代码行。随意指定自己的用户名和密码值。")],-1),ya=a("div",{class:"language-xml line-numbers-mode","data-ext":"xml","data-title":"xml"},[a("pre",{class:"language-xml"},[a("code",null,[a("span",{class:"token tag"},[a("span",{class:"token tag"},[a("span",{class:"token punctuation"},"<"),t("role")]),t(),a("span",{class:"token attr-name"},"rolename"),a("span",{class:"token attr-value"},[a("span",{class:"token punctuation attr-equals"},"="),a("span",{class:"token punctuation"},'"'),t("admin"),a("span",{class:"token punctuation"},'"')]),a("span",{class:"token punctuation"},"/>")]),t(`
`),a("span",{class:"token tag"},[a("span",{class:"token tag"},[a("span",{class:"token punctuation"},"<"),t("role")]),t(),a("span",{class:"token attr-name"},"rolename"),a("span",{class:"token attr-value"},[a("span",{class:"token punctuation attr-equals"},"="),a("span",{class:"token punctuation"},'"'),t("admin-gui"),a("span",{class:"token punctuation"},'"')]),a("span",{class:"token punctuation"},"/>")]),t(`
`),a("span",{class:"token tag"},[a("span",{class:"token tag"},[a("span",{class:"token punctuation"},"<"),t("role")]),t(),a("span",{class:"token attr-name"},"rolename"),a("span",{class:"token attr-value"},[a("span",{class:"token punctuation attr-equals"},"="),a("span",{class:"token punctuation"},'"'),t("manager"),a("span",{class:"token punctuation"},'"')]),a("span",{class:"token punctuation"},"/>")]),t(`
`),a("span",{class:"token tag"},[a("span",{class:"token tag"},[a("span",{class:"token punctuation"},"<"),t("role")]),t(),a("span",{class:"token attr-name"},"rolename"),a("span",{class:"token attr-value"},[a("span",{class:"token punctuation attr-equals"},"="),a("span",{class:"token punctuation"},'"'),t("manager-gui"),a("span",{class:"token punctuation"},'"')]),a("span",{class:"token punctuation"},"/>")]),t(`
`),a("span",{class:"token tag"},[a("span",{class:"token tag"},[a("span",{class:"token punctuation"},"<"),t("user")]),t(),a("span",{class:"token attr-name"},"username"),a("span",{class:"token attr-value"},[a("span",{class:"token punctuation attr-equals"},"="),a("span",{class:"token punctuation"},'"'),t("linuxtechi"),a("span",{class:"token punctuation"},'"')]),t(),a("span",{class:"token attr-name"},"password"),a("span",{class:"token attr-value"},[a("span",{class:"token punctuation attr-equals"},"="),a("span",{class:"token punctuation"},'"'),t("<enetr-password-here>"),a("span",{class:"token punctuation"},'"')]),t(),a("span",{class:"token attr-name"},"roles"),a("span",{class:"token attr-value"},[a("span",{class:"token punctuation attr-equals"},"="),a("span",{class:"token punctuation"},'"'),t("admin,admin-gui,manager,manager-gui"),a("span",{class:"token punctuation"},'"')]),a("span",{class:"token punctuation"},"/>")]),t(`
`)])]),a("div",{class:"line-numbers","aria-hidden":"true"},[a("div",{class:"line-number"}),a("div",{class:"line-number"}),a("div",{class:"line-number"}),a("div",{class:"line-number"}),a("div",{class:"line-number"})])],-1),Ta=a("hr",null,null,-1),Ea=a("p",null,"管理 Apache Tomcat 的远程访问",-1),Aa=a("p",null,"默认情况下，只能从主机系统访问 Tomcat 的 web 界面。因此，我们需要通过手动编辑 context.xml 配置文件来配置对 Tomcat Manager 的远程访问。",-1),xa=a("div",{class:"language-bash line-numbers-mode","data-ext":"sh","data-title":"sh"},[a("pre",{class:"language-bash"},[a("code",null,[t("$ "),a("span",{class:"token function"},"sudo"),t(),a("span",{class:"token function"},"vi"),t(` /opt/tomcat/webapps/manager/META-INF/context.xml
`)])]),a("div",{class:"line-numbers","aria-hidden":"true"},[a("div",{class:"line-number"})])],-1),Ja=a("p",null,"向下滚动并注释这些行",-1),ja=a("p",null,[a("img",{src:"http://cdn.ayusummer233.top/DailyNotes/202409111638279.png",alt:"image-20240911163823180"})],-1),Da=a("p",null,"保存文件并退出。接下来，我们需要允许远程访问 Host Manager。因此，编辑主机管理器的 context.xml 文件。",-1),wa=a("div",{class:"language-bash line-numbers-mode","data-ext":"sh","data-title":"sh"},[a("pre",{class:"language-bash"},[a("code",null,[t("$ "),a("span",{class:"token function"},"sudo"),t(),a("span",{class:"token function"},"vi"),t(` /opt/tomcat/webapps/host-manager/META-INF/context.xml
`)])]),a("div",{class:"line-numbers","aria-hidden":"true"},[a("div",{class:"line-number"})])],-1),Wa=a("p",null,[a("img",{src:"http://cdn.ayusummer233.top/DailyNotes/202409111639817.png",alt:"image-20240911163925729"})],-1),Na=a("hr",null,null,-1),Sa=a("p",null,"保存更改并退出配置文件。要应用所做的所有更改，请重新启动 Tomcat。",-1),Ba=a("div",{class:"language-bash line-numbers-mode","data-ext":"sh","data-title":"sh"},[a("pre",{class:"language-bash"},[a("code",null,[t("$ "),a("span",{class:"token function"},"sudo"),t(` systemctl restart tomcat
`),a("span",{class:"token comment"},"# 或者使用脚本来停止与启动"),t(`
/opt/tomcat/bin/shutdown.sh
/opt/tomcat/bin/startup.sh
`)])]),a("div",{class:"line-numbers","aria-hidden":"true"},[a("div",{class:"line-number"}),a("div",{class:"line-number"}),a("div",{class:"line-number"}),a("div",{class:"line-number"})])],-1),Pa=a("hr",null,null,-1),qa=a("hr",null,null,-1),Ca=a("h4",{id:"tomcat配置",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#tomcat配置"},[a("span",null,"Tomcat配置")])],-1),Ia={href:"https://tomcat.apache.org/tomcat-9.0-doc/introduction.html",target:"_blank",rel:"noopener noreferrer"},Fa=l(`<p>安装完 Tomcat 后可以配置下环境变量, 系统变量中添加 <code>CATALINA_HOME</code> 指向 Tomcat 目录</p><p><img src="http://cdn.ayusummer233.top/DailyNotes/202409111424166.png" alt="image-20240911142434113"></p><hr><h4 id="通过docker快速搭建与使用tomcat环境" tabindex="-1"><a class="header-anchor" href="#通过docker快速搭建与使用tomcat环境"><span>通过Docker快速搭建与使用Tomcat环境</span></a></h4><p>可以直接使用 Tomcat 官方的 Docker 容器快速构建 Tomcat 环境:</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment"># 拉取镜像</span>
<span class="token function">docker</span> pull tomcat:7
<span class="token function">docker</span> pull tomcat:8
<span class="token function">docker</span> pull tomcat:9

<span class="token comment"># 运行容器 -d(后台运行) --name(给容器命名,后续可以使用此容器名称操作容器而不需要去查询与复制容器ID)</span>
<span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--name</span> tomcat8 <span class="token parameter variable">-p</span> <span class="token number">9908</span>:8080 tomcat:8
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="http://cdn.ayusummer233.top/DailyNotes/202409251043734.png" alt="image-20240925104307502"></p><p><img src="http://cdn.ayusummer233.top/DailyNotes/202409251043034.png" alt="image-20240925104345950"></p><p><img src="http://cdn.ayusummer233.top/DailyNotes/202409251043301.png" alt="image-20240925104355226"></p><p><img src="http://cdn.ayusummer233.top/DailyNotes/202409251055067.png" alt="image-20240925105516976"></p><p>可以直接使用 VSCode 的 RemoteDevelopment 扩展与容器交互操作容器</p><p><img src="http://cdn.ayusummer233.top/DailyNotes/202409251056853.png" alt="image-20240925105614760"></p><p><img src="http://cdn.ayusummer233.top/DailyNotes/202409251057684.png" alt="image-20240925105701601"></p><p><img src="http://cdn.ayusummer233.top/DailyNotes/202409251100222.png" alt="image-20240925110011109"></p><p>在 <code>/usr/local/tomcat</code> 目录下有 <code>webapps</code> 和 <code>webapps.dist</code></p><ul><li><code>webapps</code>: Tomcat 默认的 Web 应用程序目录, 实际部署的应用放置于此</li><li><code>webapps.dist</code>: Webapps 的备份/示例文件副本, 包含一些默认的应用程序结构及配置文件</li></ul><p>webapps 目录下有一些子目录:</p><ul><li><p><strong><code>docs</code></strong>：包含 Tomcat 的文档和相关示例，帮助用户理解 Tomcat 的使用和配置方法。通常包括用户手册、API 文档等。</p></li><li><p><strong><code>examples</code></strong>：提供了多种示例 Web 应用，展示了如何使用 Servlet、JSP 和其他 Java EE 技术。</p><p>这些示例应用有助于开发者快速了解如何构建和部署 Java Web 应用。</p></li><li><p><strong><code>host-manager</code></strong>：Tomcat 的虚拟主机管理应用，允许用户通过 Web 界面管理和配置虚拟主机</p><p>通过该界面，可以添加、删除和配置虚拟主机的相关设置。</p><p>Tomcat 的虚拟主机管理应用是一个用于管理多个虚拟主机的工具，允许在同一 Tomcat 实例上托管多个网站或 Web 应用, 用户可以在同一服务器上托管多个不同的域名（例如 <code>example1.com</code> 和 <code>example2.com</code>），每个域名可以指向不同的 Web 应用。</p></li><li><p><strong><code>manager</code></strong>：Tomcat 的管理应用，用于管理部署的 Web 应用，包括启动、停止、重新加载和查看应用的状态</p><p>它提供了一个 Web 界面，方便用户管理 Tomcat 实例中的所有应用。</p></li><li><p><strong><code>ROOT</code></strong>：Tomcat 的根应用目录，通常用于部署默认的 Web 应用。</p><p>如果将一个应用放在 <code>ROOT</code> 目录下，它将会在根 URL（例如 <code>http://localhost:8080/</code>）下访问。</p></li></ul><hr><p>这里要快速部署一个示例 Web 应用的话可以直接把 ROOT 目录整个拷贝到 webapps 里来:</p><p><img src="http://cdn.ayusummer233.top/DailyNotes/202409251122135.png" alt="image-20240925112247021"></p><hr><h4 id="日志" tabindex="-1"><a class="header-anchor" href="#日志"><span>日志</span></a></h4><p>在 Tomcat 的 log 目录下通常可以看到如下这些日志文件</p><p><img src="http://cdn.ayusummer233.top/DailyNotes/202409251621572.png" alt="image-20240925162136447"></p><ol><li><strong>catalina.2024-09-25.log</strong>：Catalina（Tomcat的核心组件）的主日志文件，记录了Tomcat服务器的启动、停止和运行过程中发生的各种事件和错误。</li><li><strong>host-manager.2024-09-25.log</strong>：Host Manager应用的日志文件，记录了通过Host Manager进行的操作和事件。</li><li><strong>localhost.2024-09-25.log</strong>：localhost主机的日志文件，记录了在localhost主机上部署的所有Web应用程序的事件和错误。</li><li><strong>localhost_access_log.2024-09-25.txt</strong>：这是访问日志文件，记录了所有对localhost主机的HTTP请求，包括请求的时间、IP地址、请求的资源、响应状态等信息。</li><li><strong>manager.2024-09-25.log</strong>：这是Manager应用的日志文件，记录了通过Manager进行的操作和事件。</li></ol><hr><h3 id="jetty" tabindex="-1"><a class="header-anchor" href="#jetty"><span>Jetty</span></a></h3>`,28),Ha={href:"https://jetty.org/index.html",target:"_blank",rel:"noopener noreferrer"},La={href:"https://github.com/jetty/jetty.project",target:"_blank",rel:"noopener noreferrer"},Ma=l("<p>Eclipse Jetty 提供了一个高度可扩展且内存高效的 Web 服务器和 servlet 容器，支持许多协议，如 HTTP/3、2、1 和 WebSocket。此外，该项目还提供了与许多其他技术的集成，例如 OSGi、JMX、JNDI、JAAS 等。这些组件是开源的，可在 EPL2 和 Apache2 许可证下免费用于商业用途和分发。</p><p>Eclipse Jetty 是一个轻量级、高度可扩展、基于 Java 的 Web 服务器和 Servlet 引擎。Jetty 的目标是以高容量、低延迟的方式支持 Web 协议（HTTP/1、HTTP/2、HTTP/3、WebSocket 等），从而提供最高性能，同时保持易用性和与多年 Servlet 开发的兼容性。Jetty 是一种现代的完全异步 Web 服务器，作为面向组件的技术有着悠久的历史，可以轻松嵌入到应用程序中，同时仍然为 Web 应用程序部署提供可靠的传统发行版。</p><p><strong>特点</strong>：</p><ul><li>轻量级、高性能，启动速度快，占用内存少。</li><li>支持嵌入式使用，适合与其他应用或框架集成，很多微服务框架（如 Spring Boot）默认使用 Jetty 作为其嵌入式服务器。</li><li>更适合高并发、低资源占用的场景。</li><li>相比 Tomcat，Jetty 的默认配置较少，更灵活，可以根据需求定制和扩展。</li></ul><p><strong>使用场景</strong>：特别适用于需要轻量级、嵌入式服务器的场景，如微服务架构中的服务实例。</p>",5);function Oa(Ra,Va){const n=i("ExternalLinkIcon"),r=i("Tabs");return u(),m("div",null,[h,a("blockquote",null,[a("p",null,[a("a",g,[t("Apache Tomcat® - 欢迎！ --- Apache Tomcat® - Welcome!"),e(n)])])]),a("p",null,[t("Apache Tomcat® 是 "),a("a",b,[t("Jakarta Servlet"),e(n)]),t("、"),a("a",v,[t("Jakarta Pages"),e(n)]),t("、"),a("a",k,[t("Jakarta Expression Language"),e(n)]),t("、"),a("a",_,[t("Jakarta WebSocket"),e(n)]),t("、"),a("a",f,[t("Jakarta Annotations"),e(n)]),t(" 和 "),a("a",y,[t("Jakarta Authentication"),e(n)]),t(" 规范的开源实现。这些规范是 "),a("a",T,[t("Jakarta EE 平台"),e(n)]),t("的一部分。")]),E,a("blockquote",null,[a("p",null,[a("a",A,[t("Apache Tomcat® - Apache Tomcat 8 Software Downloads --- Apache Tomcat® - Apache Tomcat 8 软件下载"),e(n)])])]),x,J,e(r,{id:"118",data:[{id:"Windows"},{id:"Linux(Debian)(未成功,归档)"}],active:0},{title0:s(({value:o,isActive:c})=>[t("Windows")]),title1:s(({value:o,isActive:c})=>[t("Linux(Debian)(未成功,归档)")]),tab0:s(({value:o,isActive:c})=>[j,D,w,W,N,S,B,P,q,C,I,F,H]),tab1:s(({value:o,isActive:c})=>[a("blockquote",null,[a("p",null,[a("a",L,[t("如何在 Debian 11 上安装 Apache Tomcat ? - 个人文章 - SegmentFault 思否"),e(n)])]),a("p",null,[a("a",M,[t("Apache Tomcat® - Apache Tomcat 9 Software Downloads"),e(n)])])]),O,R,V,$,X,z,U,G,K,Q,Y,Z,aa,ta,ea,na,sa,la,oa,ca,ia,ra,pa,ua,ma,da,ha,ga,ba,va,ka,_a,fa,ya,Ta,Ea,Aa,xa,Ja,ja,Da,wa,Wa,Na,Sa,Ba,Pa]),_:1},8,["data"]),qa,Ca,a("blockquote",null,[a("p",null,[a("a",Ia,[t("Apache Tomcat 9 （9.0.94） - 简介 --- Apache Tomcat 9 (9.0.94) - Introduction"),e(n)])])]),Fa,a("blockquote",null,[a("p",null,[a("a",Ha,[t("The Eclipse Jetty Project :: Eclipse Jetty"),e(n)])]),a("p",null,[a("a",La,[t("jetty/jetty.project: Eclipse Jetty® - Web Container & Clients - supports HTTP/2, HTTP/1.1, HTTP/1.0, websocket, servlets, and more (github.com)"),e(n)])])]),Ma])}const za=p(d,[["render",Oa],["__file","JavaWeb.html.vue"]]),Ua=JSON.parse('{"path":"/Language/Java/JavaWeb.html","title":"Java Web","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"Servlet容器","slug":"servlet容器","link":"#servlet容器","children":[{"level":3,"title":"Tomcat","slug":"tomcat","link":"#tomcat","children":[]},{"level":3,"title":"Jetty","slug":"jetty","link":"#jetty","children":[]}]}],"git":{"createdTime":1667831333000,"updatedTime":1727294118000,"contributors":[{"name":"233","email":"ayusummer233@vip.qq.com","commits":3},{"name":"233Official","email":"ayusummer233@qq.com","commits":2},{"name":"233PC","email":"ayusummer233@gmail.com","commits":1},{"name":"咸鱼型233","email":"ayusummer233@qq.com","commits":1}]},"readingTime":{"minutes":9.58,"words":2875},"filePathRelative":"Language/Java/JavaWeb.md","localizedDate":"2022年11月7日","excerpt":"\\n<ul>\\n<li><a href=\\"#java-web\\">Java Web</a>\\n<ul>\\n<li><a href=\\"#servlet%E5%AE%B9%E5%99%A8\\">Servlet容器</a>\\n<ul>\\n<li><a href=\\"#tomcat\\">Tomcat</a>\\n<ul>\\n<li><a href=\\"#tomcat%E5%AE%89%E8%A3%85\\">Tomcat安装</a></li>\\n<li><a href=\\"#tomcat%E9%85%8D%E7%BD%AE\\">Tomcat配置</a></li>\\n<li><a href=\\"#%E9%80%9A%E8%BF%87docker%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BA%E4%B8%8E%E4%BD%BF%E7%94%A8tomcat%E7%8E%AF%E5%A2%83\\">通过Docker快速搭建与使用Tomcat环境</a></li>\\n<li><a href=\\"#%E6%97%A5%E5%BF%97\\">日志</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"#jetty\\">Jetty</a></li>\\n</ul>\\n</li>\\n</ul>\\n</li>\\n</ul>"}');export{za as comp,Ua as data};

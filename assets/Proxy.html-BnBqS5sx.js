import{_ as l}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as o,o as i,c,a as n,d as s,b as a,e as t}from"./app-BT-bWAve.js";const p={},r=t('<h1 id="代理" tabindex="-1"><a class="header-anchor" href="#代理"><span>代理</span></a></h1><ul><li><a href="#%E4%BB%A3%E7%90%86">代理</a><ul><li><a href="#clashforwindowscfw">ClashForWindows(CFW)</a><ul><li><a href="#pip-%E6%8A%A5%E9%94%99-valueerror-check_hostname-requires-server_hostname">pip 报错 <code>ValueError: check_hostname requires server_hostname</code></a></li><li><a href="#tun-mode">TUN Mode</a></li><li><a href="#mixin">Mixin</a></li><li><a href="#bypass">Bypass</a></li><li><a href="#%E5%86%85%E7%BD%91%E6%96%AD%E7%BD%91%E4%B8%BB%E6%9C%BA%E5%87%BA%E7%BD%91%E6%B5%81%E9%87%8F%E8%B5%B0%E5%8F%A6%E4%B8%80%E5%8F%B0%E8%81%94%E7%BD%91%E4%B8%BB%E6%9C%BA">内网断网主机出网流量走另一台联网主机</a></li></ul></li><li><a href="#clash-verge-rev">clash-verge-rev</a><ul><li><a href="#%E5%9B%BE%E6%A0%87%E5%8D%A1%E6%AD%BB">图标卡死</a></li></ul></li><li><a href="#proxifier">Proxifier</a></li></ul></li></ul><hr><h2 id="clashforwindows-cfw" tabindex="-1"><a class="header-anchor" href="#clashforwindows-cfw"><span>ClashForWindows(CFW)</span></a></h2>',4),u={href:"https://github.com/Dreamacro/clash",target:"_blank",rel:"noopener noreferrer"},d=n("br",null,null,-1),m={href:"https://github.com/Dreamacro/clash-dashboard",target:"_blank",rel:"noopener noreferrer"},h={href:"https://www.alvinkwok.cn/2022/01/29/2022/01/Clash%20For%20Linux%20Install%20Guide/",target:"_blank",rel:"noopener noreferrer"},k=n("hr",null,null,-1),v={href:"https://clashdingyue.tk/2022/06/%E6%AD%A3%E7%A1%AE%E9%85%8D%E7%BD%AEClash-For-Windows/",target:"_blank",rel:"noopener noreferrer"},g={href:"https://cornradio.github.io/hugo/posts/4minxin-howtouse/",target:"_blank",rel:"noopener noreferrer"},b={href:"https://cornradio.github.io/hugo/posts/%E8%AE%A9steam%E7%BB%95%E8%BF%87clash%E7%B3%BB%E7%BB%9F%E4%BB%A3%E7%90%86/",target:"_blank",rel:"noopener noreferrer"},_=n("hr",null,null,-1),f={href:"https://www.freebuf.com/vuls/323348.html",target:"_blank",rel:"noopener noreferrer"},y=t("<p><strong><code>Clash Version &lt;= V0.19.8</code> 存在 RCE 漏洞</strong>, 建议升级到 <code>V0.19.10</code> 及以上版本</p><hr><p>Windows 端的配置比较方便, Linux 端主要需要注意普通用户和root用户的区别以及需要多配置一个 dashboard 来管理</p><p>下面主要记录下 ubuntu 上使用 clash 的随笔</p><p>需要注意的是, 使用不同的用户进行操作生成的配置文件会在对应用户的 <code>.config</code> 目录下, 如下记录的是使用 root 用户登录时进行的操作(SSH 链接的 ubuntu 设备, 习惯了 root; 相应的桌面端的话一般是普通用户)</p><p>在 <code>/root/.config/</code> 目录下新建一个 <code>clash</code> 目录</p>",6),x={href:"https://github.com/Dreamacro/clash/releases",target:"_blank",rel:"noopener noreferrer"},q={href:"https://github.com/Dreamacro/clash/releases/download/v1.13.0/clash-linux-amd64-v1.13.0.gz",target:"_blank",rel:"noopener noreferrer"},E=t(`<div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment"># 解压该 gz 包得到一个文件, 给该文件加上执行权限</span>
gunzip clash-linux-amd64-v1.13.0.gz
<span class="token function">chmod</span> u+x clash-linux-amd64-v1.13.0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>clone dashboard 仓库并切换到 gh-pages 分支:</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">git</span> clone https://github.com/Dreamacro/clash-dashboard.git
<span class="token builtin class-name">cd</span> clash-dashboard
<span class="token function">git</span> checkout <span class="token parameter variable">-b</span> gh-pages origin/gh-pages
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>尝试过使用镜像 clone, 但是在 <code>git checkout -b gh-pages origin/gh-pages</code> 这步会报错找不到 <code>origin/gh-pages</code> 分支, 由于裸连能 clone 下来所以没再处理</p></blockquote><p>下载配置信息</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">wget</span> <span class="token parameter variable">-O</span> config.yaml <span class="token punctuation">[</span>订阅链接<span class="token punctuation">]</span>
<span class="token function">sudo</span> <span class="token function">wget</span> <span class="token parameter variable">-O</span> Country.mmdb https://www.sub-speeder.com/client-download/Country.mmdb
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>编辑 <code>config.yaml</code> 的如下三个属性, 分别对应页面端口, 访问密钥以及页面所在目录</p><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token key atrule">external-controller</span><span class="token punctuation">:</span> <span class="token string">&#39;0.0.0.0:9090&#39;</span>
<span class="token key atrule">secret</span><span class="token punctuation">:</span> <span class="token string">&#39;xxxxxxx&#39;</span>
<span class="token key atrule">external-ui</span><span class="token punctuation">:</span> <span class="token string">&#39;/root/.config/clash/clash-dashboard&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>尝试运行 clash</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">screen</span> <span class="token parameter variable">-S</span> clash
./clash-linux-amd64-v1.13.0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>访问 <code>[ip]:[port]/ui</code> 输入密钥登入</p><p>到这里没问题的话就可以配置下系统代理了</p><p><img src="http://cdn.ayusummer233.top/DailyNotes/202302011518116.png" alt="image-20230201151825066"></p><p>有些程序不走系统代理，需要单独配置，比如 git, 需要单独进行配置</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">git</span> config <span class="token parameter variable">--global</span> http.proxy <span class="token string">&quot;http://127.0.0.1:7890&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><hr><h3 id="pip-报错-valueerror-check-hostname-requires-server-hostname" tabindex="-1"><a class="header-anchor" href="#pip-报错-valueerror-check-hostname-requires-server-hostname"><span>pip 报错 <code>ValueError: check_hostname requires server_hostname</code></span></a></h3><p><img src="http://cdn.ayusummer233.top/DailyNotes/202307182358348.png" alt="image-20230718235830248"></p><p><img src="http://cdn.ayusummer233.top/DailyNotes/202307182359232.png" alt="image-20230718235900189"></p><p>解决方案: 打开该项配置:</p><p><img src="http://cdn.ayusummer233.top/DailyNotes/202307190000154.png" alt="image-20230719000029091"></p>`,21),w={href:"https://github.com/python/cpython/pull/26307",target:"_blank",rel:"noopener noreferrer"},B=n("p",null,"开了之后就正常了:",-1),N=n("p",null,[n("img",{src:"http://cdn.ayusummer233.top/DailyNotes/202307190000747.png",alt:"image-20230719000057721"})],-1),A=n("hr",null,null,-1),D=n("hr",null,null,-1),C=n("h3",{id:"tun-mode",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#tun-mode"},[n("span",null,"TUN Mode")])],-1),T={href:"https://docs.cfw.lbyczf.com/contents/tun.html",target:"_blank",rel:"noopener noreferrer"},P={href:"https://clashdingyue.tk/2022/06/%E6%AD%A3%E7%A1%AE%E9%85%8D%E7%BD%AEClash-For-Windows/",target:"_blank",rel:"noopener noreferrer"},F={href:"https://blog.dejavu.moe/posts/cfw-tun/",target:"_blank",rel:"noopener noreferrer"},U=n("p",null,"Clash 有三种代理模式",-1),W=t("<li><p>系统代理模式</p><ul><li>最简单的一种模式，只需要开启系统代理的开关即可。</li><li>但是有些软件不走系统代理，因此这种模式适合普通用户，平常用浏览器进行科学上网的。</li></ul></li><li><p>Clash Tap Device模式</p><ul><li><p>Clash Tap 虚拟网卡模式，让所有的流量走虚拟网卡，实现真正的全局翻墙模式，实现所有软件代理。</p></li><li><p><strong>TAP</strong> 是 <code>二层设备</code>，模拟一个物理以太网设备，操作第二层数据包如以太网数据帧</p><blockquote><p>对于不遵循系统代理的软件，TUN 和 TAP 模式都可以接管系统流量并交由 CFW 处理，但是 TUN 模式在 Windows 下拥有比 TAP 模式更好的性能，</p></blockquote></li></ul></li><li><p>Clash TUN Mode模式</p><ul><li><p><strong>TUN</strong> 是 <code>三层设备</code> ，模拟一个网络层设备，操作 <strong>第三层</strong> 数据包比如 IP 数据包，TUN 虚拟网卡实现 IP 层隧道</p><p>Tun 模式通过新建一个 Tun 虚拟网卡接受操作系统的三层浏览流量，从而拓展 Clash 入口(inbound) 转发能力，Tun 模式可以提升 Clash 处理 UDP 流量的能力，可以劫持任何三层流量，实现 DNS 劫持也是轻而易举，并且它与部分操作系统的网络栈结合也非常好，可以提升利用 iptables 等组件的能力</p></li><li><p>对于不遵循系统代理的软件，TUN 模式可以接管其流量并交由 CFW 处理，在 Windows 中，TUN 模式性能比 TAP 模式好</p></li></ul><blockquote><p><code>注意</code>: 近期大部分浏览器默认已经开启“<strong>安全 DNS</strong>”功能，此功能会影响 TUN 模式劫持 DNS 请求导致反推域名失败，请在浏览器设置中关闭此功能以保证 TUN 模式正常运行</p></blockquote></li>",3),z=n("p",null,"什么情况下需要开启TAP/TUN ？",-1),S=n("li",null,"在使用一些游戏软件需要加速，或者一些不遵循系统代理的软件时，需要开启 TAP/TUN 模式。",-1),L=n("li",null,"专业用户，例如IT、开发人员，需要经常操作终端，使用开发软件，用到Linux子系统的建议使用TUN模式。",-1),M=n("li",null,"其实大部分软件都走系统代理，例如浏览器，但是有些不走系统代理，例如某些游戏，Git等。平时使用浏览器翻墙，比如访问google网站，或者使用一些遵循系统代理的软件时，不需要开启 TAP/TUN 模式。建议直接使用系统代理模式。",-1),G=n("code",null,"UWP Loopback",-1),I=n("code",null,"Fiddler Web Debuger",-1),V={href:"https://blog.dejavu.moe/posts/git-npm-yarn-proxy/",target:"_blank",rel:"noopener noreferrer"},R=n("li",null,[n("mark",null,"在使用局域网VPN时"),s(", 如果同时启用了 TUN Mode 可能会导致网络异常, 此时建议使用 System Proxy")],-1),O=n("p",null,[s("启用 TUN Mode("),n("code",null,"0.19.27"),s("以上版本)")],-1),H=n("code",null,"General",-1),j=n("code",null,"Service Mode",-1),J=n("code",null,"Manage",-1),Y=n("code",null,"绿色",-1),K={href:"https://docs.cfw.lbyczf.com/contents/questions.html#service-mode-%E6%97%A0%E6%B3%95%E5%AE%89%E8%A3%85-windows",target:"_blank",rel:"noopener noreferrer"},Q={href:"https://github.com/Fndroid/clash_for_windows_pkg/issues/2839",target:"_blank",rel:"noopener noreferrer"},X=n("p",null,[n("img",{src:"http://cdn.ayusummer233.top/DailyNotes/202307190030213.png",alt:"image-20230719003009188"})],-1),Z=n("p",null,[n("img",{src:"http://cdn.ayusummer233.top/DailyNotes/202307190030538.png",alt:"image-20230719003029472"})],-1),$=t('<li><p>点击<code>General</code>中<code>TUN Mode</code>右边开关启动 TUN 模式</p><p>相应的需要关闭 <code>System Proxy</code>, 如果装了 Tap Server 也需要相应 <code>uninstall</code>, 因为三种模式之间可能会冲突</p><p><img src="http://cdn.ayusummer233.top/DailyNotes/202307190031691.png" alt="image-20230719003133662"></p><blockquote><p>如果使用<code>system</code>作为 TUN stack，需要同时在系统防火墙中将 clash core 放行，方法如下：</p><p>在<code>0.19.27</code>及以上版本中，点击 Clash Core 版本号前的图标，并在 UAC 弹窗(若有) 中允许运行，CFW 将自动配置对应的防火墙规则。</p><p>成功配置防火墙规则后该图标作为指示灯亮起。</p><p><img src="http://cdn.ayusummer233.top/DailyNotes/202307190042513.png" alt="img"></p></blockquote></li>',1),nn=n("hr",null,null,-1),sn=n("h3",{id:"mixin",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#mixin"},[n("span",null,"Mixin")])],-1),en={href:"https://docs.cfw.lbyczf.com/contents/mixin.html",target:"_blank",rel:"noopener noreferrer"},an={href:"https://cornradio.github.io/hugo/posts/4clash-minxin-howtouse/",target:"_blank",rel:"noopener noreferrer"},tn=t(`<p>简单说，mixin是一种混合配置的方式，你可以把自己的配置注入到“配置文件”中，这样就可以在一定程度上的自定义配置了，比如加入一些你自己的规则之类的。</p><p><img src="http://cdn.ayusummer233.top/DailyNotes/202307190045224.png" alt="image-20230719004524193"></p><p>例如：在配置文件中统一添加<code>dns</code>字段，操作如下：</p><ol><li><p>进入 Settings 页面</p></li><li><p>滚动至 Profile Mixin 栏</p></li><li><p>点击 YAML 右边 Edit 小字打开编辑界面</p></li><li><p>在修改编辑界面内容为：</p><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token key atrule">mixin</span><span class="token punctuation">:</span> <span class="token comment"># 注意下面缩进</span>
  <span class="token key atrule">dns</span><span class="token punctuation">:</span>
    <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">listen</span><span class="token punctuation">:</span> <span class="token punctuation">:</span><span class="token number">53</span>
    <span class="token key atrule">nameserver</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 8.8.8.8
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>点击编辑器右下角保存</p></li></ol><p>在启动或切换配置时，上面内容将会替换到原有配置文件中进行覆盖</p><blockquote><p><strong>TIP</strong></p><p>配置文件内容不会被修改，混合行为只会发生在内存中</p><p>可以通过任务栏图标菜单开关这个行为</p></blockquote><hr><h3 id="bypass" tabindex="-1"><a class="header-anchor" href="#bypass"><span>Bypass</span></a></h3>`,8),ln={href:"https://docs.cfw.lbyczf.com/contents/bypass.html",target:"_blank",rel:"noopener noreferrer"},on={href:"https://github.com/Fndroid/clash_for_windows_pkg/issues/2035",target:"_blank",rel:"noopener noreferrer"},cn={href:"https://cornradio.github.io/hugo/posts/%E8%AE%A9steam%E7%BB%95%E8%BF%87clash%E7%B3%BB%E7%BB%9F%E4%BB%A3%E7%90%86/",target:"_blank",rel:"noopener noreferrer"},pn=t(`<p>可以自定义系统代理需要绕过的域名或 IP, 常用于配置局域网域名不使用代理或是其他指定的不想使用代理的域名(例如Steam游戏下载)</p><p><img src="http://cdn.ayusummer233.top/DailyNotes/202307190053433.png" alt="image-20230719005351367"></p><p>一般情况下后台基本都会挂着 Clash, 然而当需要登 Steam 下游戏时, 如果当前代理的配置中相应域名走了 Proxy 那就比较耗流量且较慢(毕竟 Steam 下载设置中是可以设置国内地区的)</p><p>此时则可以修改</p><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token key atrule">bypass</span><span class="token punctuation">:</span>
<span class="token comment"># Steam中国大陆地区游戏下载</span>
  <span class="token punctuation">-</span> <span class="token string">&quot;steampipe.steamcontent.tnkjmec.com&quot;</span> <span class="token comment">#华为云</span>
  <span class="token punctuation">-</span> <span class="token string">&quot;st.dl.eccdnx.com&quot;</span> <span class="token comment">#白山云</span>
  <span class="token punctuation">-</span> <span class="token string">&quot;st.dl.bscstorage.net&quot;</span>
  <span class="token punctuation">-</span> <span class="token string">&quot;st.dl.pinyuncloud.com&quot;</span>
  <span class="token punctuation">-</span> <span class="token string">&quot;dl.steam.clngaa.com&quot;</span> <span class="token comment">#金山云</span>
  <span class="token punctuation">-</span> <span class="token string">&quot;cdn.mileweb.cs.steampowered.com.8686c.com&quot;</span> <span class="token comment">#网宿云</span>
  <span class="token punctuation">-</span> <span class="token string">&quot;cdn-ws.content.steamchina.com&quot;</span>
  <span class="token punctuation">-</span> <span class="token string">&quot;cdn-qc.content.steamchina.com&quot;</span> <span class="token comment">#腾讯云</span>
  <span class="token punctuation">-</span> <span class="token string">&quot;cdn-ali.content.steamchina.com&quot;</span> <span class="token comment">#阿里云</span>
<span class="token comment"># Steam非中国大陆地区游戏下载/社区实况直播</span>
  <span class="token punctuation">-</span> <span class="token string">&quot;*.steamcontent.com&quot;</span>
<span class="token comment"># Steam国际创意工坊下载CDN</span>
  <span class="token punctuation">-</span> <span class="token string">&quot;steamusercontent-a.akamaihd.net&quot;</span> <span class="token comment">#CDN-Akamai</span>
<span class="token comment"># Origin游戏下载</span>
  <span class="token punctuation">-</span> <span class="token string">&quot;ssl-lvlt.cdn.ea.com&quot;</span> <span class="token comment">#CDN-Level3</span>
  <span class="token punctuation">-</span> <span class="token string">&quot;origin-a.akamaihd.net&quot;</span> <span class="token comment">#CDN-Akamai</span>
<span class="token comment"># Battle.net战网中国大陆地区游戏下载</span>
  <span class="token punctuation">-</span> <span class="token string">&quot;client05.pdl.wow.battlenet.com.cn&quot;</span> <span class="token comment">#华为云</span>
  <span class="token punctuation">-</span> <span class="token string">&quot;client02.pdl.wow.battlenet.com.cn&quot;</span> <span class="token comment">#网宿云</span>
<span class="token comment"># Battle.net战网非中国大陆地区游戏下载</span>
  <span class="token punctuation">-</span> <span class="token string">&quot;level3.blizzard.com&quot;</span> <span class="token comment">#CDN-Level3</span>
  <span class="token punctuation">-</span> <span class="token string">&quot;blzddist1-a.akamaihd.net&quot;</span> <span class="token comment">#CDN-Akamai</span>
  <span class="token punctuation">-</span> <span class="token string">&quot;blzddistkr1-a.akamaihd.net&quot;</span>
  <span class="token punctuation">-</span> <span class="token string">&quot;kr.cdn.blizzard.com&quot;</span> <span class="token comment">#CDN-Blizzard</span>
  <span class="token punctuation">-</span> <span class="token string">&quot;us.cdn.blizzard.com&quot;</span>
  <span class="token punctuation">-</span> <span class="token string">&quot;eu.cdn.blizzard.com&quot;</span>
<span class="token comment"># Epic Games中国大陆地区游戏下载</span>
  <span class="token punctuation">-</span> <span class="token string">&quot;epicgames-download1-1251447533.file.myqcloud.com&quot;</span>
<span class="token comment"># Epic Games非中国大陆地区游戏下载</span>
  <span class="token punctuation">-</span> <span class="token string">&quot;epicgames-download1.akamaized.net&quot;</span> <span class="token comment">#CDN-Akamai</span>
  <span class="token punctuation">-</span> <span class="token string">&quot;download.epicgames.com&quot;</span> <span class="token comment">#CDN-Amazon</span>
  <span class="token punctuation">-</span> <span class="token string">&quot;download2.epicgames.com&quot;</span>
  <span class="token punctuation">-</span> <span class="token string">&quot;download3.epicgames.com&quot;</span>
  <span class="token punctuation">-</span> <span class="token string">&quot;download4.epicgames.com&quot;</span>
<span class="token comment"># Rockstar Launcher客户端更新/游戏更新/游戏下载</span>
  <span class="token punctuation">-</span> <span class="token string">&quot;gamedownloads-rockstargames-com.akamaized.net&quot;</span>
<span class="token comment"># GOG中国大陆游戏下载/客户端更新</span>
  <span class="token punctuation">-</span> <span class="token string">&quot;gog.qtlglb.com&quot;</span>
<span class="token comment"># GOG非中国大陆游戏下载/客户端更新</span>
  <span class="token punctuation">-</span> <span class="token string">&quot;cdn.gog.com&quot;</span>
  <span class="token punctuation">-</span> <span class="token string">&quot;galaxy-client-update.gog.com&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h3 id="内网断网主机出网流量走另一台联网主机" tabindex="-1"><a class="header-anchor" href="#内网断网主机出网流量走另一台联网主机"><span>内网断网主机出网流量走另一台联网主机</span></a></h3><p>写 <code>config.yml</code></p><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token key atrule">mixed-port</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>此项配置需要绑定的本地端口<span class="token punctuation">]</span>
<span class="token key atrule">allow-lan</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># 是否 allow lan 后续也可以直接在 UI 上改</span>
<span class="token key atrule">external-controller</span><span class="token punctuation">:</span> 127.0.0.1<span class="token punctuation">:</span>xxxx
<span class="token key atrule">secret</span><span class="token punctuation">:</span> xxx

<span class="token key atrule">proxies</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">&quot;LAN Proxy&quot;</span>
    <span class="token key atrule">type</span><span class="token punctuation">:</span> socks5
    <span class="token key atrule">server</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>联网主机ip<span class="token punctuation">]</span>
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>联网主机代理端口<span class="token punctuation">]</span>
<span class="token key atrule">rules</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> DOMAIN<span class="token punctuation">-</span>SET<span class="token punctuation">,</span>*<span class="token punctuation">,</span>LAN Proxy
  <span class="token punctuation">-</span> FINAL<span class="token punctuation">,</span> LAN Proxy  <span class="token comment"># 默认流量也走 LAN Proxy</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>例如:</p><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token key atrule">mixed-port</span><span class="token punctuation">:</span> <span class="token number">7890</span>
<span class="token key atrule">allow-lan</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
<span class="token key atrule">external-controller</span><span class="token punctuation">:</span> 127.0.0.1<span class="token punctuation">:</span><span class="token number">49897</span>
<span class="token key atrule">secret</span><span class="token punctuation">:</span> a1054823<span class="token punctuation">-</span>f243<span class="token punctuation">-</span>4256<span class="token punctuation">-</span>ac5b<span class="token punctuation">-</span>a858457a02e

<span class="token key atrule">proxies</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">&quot;LAN Proxy&quot;</span>
    <span class="token key atrule">type</span><span class="token punctuation">:</span> socks5
    <span class="token key atrule">server</span><span class="token punctuation">:</span> 192.168.1.21
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">7890</span>
<span class="token key atrule">rules</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> DOMAIN<span class="token punctuation">-</span>SET<span class="token punctuation">,</span>*<span class="token punctuation">,</span>LAN Proxy
  <span class="token punctuation">-</span> FINAL<span class="token punctuation">,</span> LAN Proxy  <span class="token comment"># 默认流量也走 LAN Proxy</span>
 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="http://cdn.ayusummer233.top/DailyNotes/202410081624764.png" alt="image-20241008162444574"></p></blockquote><p>断网主机所有流量走联网主机直接开 Clash 的 TUN 模式</p><p><img src="http://cdn.ayusummer233.top/DailyNotes/202410081629798.png" alt="image-20241008162912731"></p><p><img src="http://cdn.ayusummer233.top/DailyNotes/202410081629511.png" alt="image-20241008162944425"></p><blockquote><p>代理前断网主机 maven 不会走系统代理, 也不会走手动设置的当前 powershell 命令行 http 代理</p><p><img src="http://cdn.ayusummer233.top/DailyNotes/202410081632443.png" alt="image-20241008163233365"></p><p>设置代理开了 TUN 后所有流量走虚拟网卡就正常了:</p><p><img src="http://cdn.ayusummer233.top/DailyNotes/202410081632501.png" alt="image-20241008163259410"></p></blockquote><hr><h2 id="clash-verge-rev" tabindex="-1"><a class="header-anchor" href="#clash-verge-rev"><span>clash-verge-rev</span></a></h2>`,16),rn={href:"https://clash-verge-rev.github.io/guide/term.html",target:"_blank",rel:"noopener noreferrer"},un={href:"https://github.com/clash-verge-rev/clash-verge-rev/issues/420",target:"_blank",rel:"noopener noreferrer"},dn=n("h3",{id:"图标卡死",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#图标卡死"},[n("span",null,"图标卡死")])],-1),mn={href:"https://github.com/clash-verge-rev/clash-verge-rev/issues?q=is%3Aissue+is%3Aopen+%E5%8D%A1",target:"_blank",rel:"noopener noreferrer"},hn={href:"https://github.com/clash-verge-rev/clash-verge-rev/issues/1110",target:"_blank",rel:"noopener noreferrer"},kn=n("p",null,"Clash Verge Rev 和其他代理无法共存, 如果需要使用它清关闭其他代理软件",-1),vn=n("p",null,[n("img",{src:"http://cdn.ayusummer233.top/DailyNotes/image-20240725135512096.png",alt:"image-20240725135512096"})],-1),gn=n("blockquote",null,[n("p",null,"具体原因我也没找到, 不过因为这个原因我应该暂时用不到 Clash Verge Rev")],-1),bn=n("hr",null,null,-1),_n=n("h2",{id:"proxifier",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#proxifier"},[n("span",null,"Proxifier")])],-1),fn={href:"https://www.proxifier.com/",target:"_blank",rel:"noopener noreferrer"},yn=n("hr",null,null,-1);function xn(qn,En){const e=o("ExternalLinkIcon");return i(),c("div",null,[r,n("blockquote",null,[n("p",null,[n("a",u,[s("Github/Dreamacro/clash"),a(e)]),d,n("a",m,[s("Github/Dreamacro/clash-dashboard"),a(e)]),n("a",h,[s("alvinkwok/clashForLinux安装配置"),a(e)])]),k,n("p",null,[n("a",v,[s("正确配置Clash For Windows的TUN、TAP、系统代理三种模式？ | 来去之间 (clashdingyue.tk)"),a(e)])]),n("p",null,[n("a",g,[s("clash 中的 minxin 使用教程 - cornradio的技术博客"),a(e)])]),n("p",null,[n("a",b,[s("steam如何绕过clash的全局代理 - cornradio的技术博客"),a(e)])]),_]),n("blockquote",null,[n("p",null,[n("a",f,[s("Clash for windows RCE 漏洞 - FreeBuf网络安全行业门户"),a(e)])])]),y,n("p",null,[s("在 "),n("a",x,[s("Releases · Dreamacro/clash (github.com)"),a(e)]),s(" 下载对应的安装包, 这里我选择的是 "),n("a",q,[s("clash-linux-amd64-v1.13.0.gz"),a(e)])]),E,n("blockquote",null,[n("p",null,[n("a",w,[s("bpo-42627: Fix wrong parsing of Windows registry proxy settings by CrazyBoyFeng · Pull Request #26307 · python/cpython · GitHub"),a(e)])])]),B,N,A,D,C,n("blockquote",null,[n("p",null,[n("a",T,[s("TUN 模式 | Clash for Windows (lbyczf.com)"),a(e)])]),n("p",null,[n("a",P,[s("正确配置Clash For Windows的TUN、TAP、系统代理三种模式？ | 来去之间 (clashdingyue.tk)"),a(e)])]),n("p",null,[n("a",F,[s("Clash for Windows 优雅地使用 TUN 模式接管系统流量 · Dejavu's Blog"),a(e)])])]),U,n("ul",null,[W,n("li",null,[z,n("ul",null,[S,L,M,n("li",null,[s("Windows 中的 UWP 应用是无法走这个代理的，因为 UWP 应用网络隔离的‘沙箱’特性，因此我们还需要使用 "),G,s(" 中的轻量 "),I,s(" 来解锁 UWP 应用的网络隔离，后续新安装的 UWP 应用也要按照上面步骤进行添加，否则 UWP 应用就会无法联网；此外，像 Git、npm、yarn 这些是无法走系统代理的，需要 "),n("a",V,[s("手动设置代理"),a(e)]),s("，而且一些不支持设置代理但又无法在天朝直连国际互联网的软件/应用 Fuxk GFW 也是个难题，而绝佳的 CFW(Clash For Windows) 提供了 TUN/TAP 模式就很好的解决了这个问题")]),R])]),n("li",null,[O,n("ul",null,[n("li",null,[n("p",null,[s("点击"),H,s("中"),j,s("右边"),J,s("，在打开窗口中安装服务模式，安装完成应用会自动重启，Service Mode 右边地球图标变为"),Y,s("即安装成功(无法安装参考："),n("a",K,[s("这里"),a(e)]),s(")")]),n("blockquote",null,[n("p",null,[n("a",Q,[s("Service Mode 作用是啥？为什么要开启这个模式 · Issue #2839 · Fndroid/clash_for_windows_pkg (github.com)"),a(e)])])]),X,Z]),$])])]),nn,sn,n("blockquote",null,[n("p",null,[n("a",en,[s("Mixin | Clash for Windows (lbyczf.com)"),a(e)])]),n("p",null,[n("a",an,[s("clash 中的 minxin 使用教程 - cornradio的技术博客"),a(e)])])]),tn,n("blockquote",null,[n("p",null,[n("a",ln,[s("绕过系统代理 | Clash for Windows (lbyczf.com)"),a(e)])]),n("p",null,[n("a",on,[s("0.16.2 版，Steam 商店、社区无法加载 · Issue #2035 · Fndroid/clash_for_windows_pkg (github.com)"),a(e)])]),n("p",null,[n("a",cn,[s("steam如何绕过clash的全局代理 - cornradio的技术博客"),a(e)])])]),pn,n("blockquote",null,[n("p",null,[n("a",rn,[s("常见名词 - Clash Verge Rev Docs (clash-verge-rev.github.io)"),a(e)])]),n("p",null,[s("["),n("a",un,[s("Feature]如何设置特定软件进程不走代理呢？ · Issue #420 · clash-verge-rev/clash-verge-rev · GitHub"),a(e)])])]),dn,n("blockquote",null,[n("p",null,[n("a",mn,[s("Issues · clash-verge-rev/clash-verge-rev · GitHub"),a(e)])]),n("p",null,[s("["),n("a",hn,[s("BUG] 客户端会无故卡死。 · Issue #1110 · clash-verge-rev/clash-verge-rev · GitHub"),a(e)])])]),kn,vn,gn,bn,_n,n("blockquote",null,[n("p",null,[n("a",fn,[s("Proxifier - The Most Advanced Proxy Client"),a(e)])])]),yn])}const Nn=l(p,[["render",xn],["__file","Proxy.html.vue"]]),An=JSON.parse('{"path":"/DailyLife/Proxy.html","title":"代理","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"ClashForWindows(CFW)","slug":"clashforwindows-cfw","link":"#clashforwindows-cfw","children":[{"level":3,"title":"pip 报错 ValueError: check_hostname requires server_hostname","slug":"pip-报错-valueerror-check-hostname-requires-server-hostname","link":"#pip-报错-valueerror-check-hostname-requires-server-hostname","children":[]},{"level":3,"title":"TUN Mode","slug":"tun-mode","link":"#tun-mode","children":[]},{"level":3,"title":"Mixin","slug":"mixin","link":"#mixin","children":[]},{"level":3,"title":"Bypass","slug":"bypass","link":"#bypass","children":[]},{"level":3,"title":"内网断网主机出网流量走另一台联网主机","slug":"内网断网主机出网流量走另一台联网主机","link":"#内网断网主机出网流量走另一台联网主机","children":[]}]},{"level":2,"title":"clash-verge-rev","slug":"clash-verge-rev","link":"#clash-verge-rev","children":[{"level":3,"title":"图标卡死","slug":"图标卡死","link":"#图标卡死","children":[]}]},{"level":2,"title":"Proxifier","slug":"proxifier","link":"#proxifier","children":[]}],"git":{"createdTime":1728376707000,"updatedTime":1728376707000,"contributors":[{"name":"233","email":"ayusummer233@vip.qq.com","commits":1}]},"readingTime":{"minutes":9.85,"words":2956},"filePathRelative":"DailyLife/Proxy.md","localizedDate":"2024年10月8日","excerpt":"\\n<ul>\\n<li><a href=\\"#%E4%BB%A3%E7%90%86\\">代理</a>\\n<ul>\\n<li><a href=\\"#clashforwindowscfw\\">ClashForWindows(CFW)</a>\\n<ul>\\n<li><a href=\\"#pip-%E6%8A%A5%E9%94%99-valueerror-check_hostname-requires-server_hostname\\">pip 报错 <code>ValueError: check_hostname requires server_hostname</code></a></li>\\n<li><a href=\\"#tun-mode\\">TUN Mode</a></li>\\n<li><a href=\\"#mixin\\">Mixin</a></li>\\n<li><a href=\\"#bypass\\">Bypass</a></li>\\n<li><a href=\\"#%E5%86%85%E7%BD%91%E6%96%AD%E7%BD%91%E4%B8%BB%E6%9C%BA%E5%87%BA%E7%BD%91%E6%B5%81%E9%87%8F%E8%B5%B0%E5%8F%A6%E4%B8%80%E5%8F%B0%E8%81%94%E7%BD%91%E4%B8%BB%E6%9C%BA\\">内网断网主机出网流量走另一台联网主机</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"#clash-verge-rev\\">clash-verge-rev</a>\\n<ul>\\n<li><a href=\\"#%E5%9B%BE%E6%A0%87%E5%8D%A1%E6%AD%BB\\">图标卡死</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"#proxifier\\">Proxifier</a></li>\\n</ul>\\n</li>\\n</ul>"}');export{Nn as comp,An as data};

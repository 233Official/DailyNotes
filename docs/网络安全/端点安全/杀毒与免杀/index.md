# 杀毒与免杀

> [相爱相杀：杀毒软件6种主流的查杀原理 - FreeBuf网络安全行业门户](https://www.freebuf.com/articles/others-articles/336601.html)

---

可以使用 [VirusTotal - Home --- VirusTotal - 主页](https://www.virustotal.com/gui/home/upload) 来判断文件是否为病毒文件

![image-20231228021206407](http://cdn.ayusummer233.top/DailyNotes/202312280212445.png)

---

## 特征码查杀

![1.png](http://cdn.ayusummer233.top/DailyNotes/202312280115873.jpeg)

杀软公司通过各种毒经获得病毒样本并确认为病毒后会提取这个病毒文件的特征码用于唯一标识这个文件

例如最简单的文件哈希, 或是文件中唯一存在的一段字符串

这种方式可以用来防范一些已知的恶意软件,病毒文件

---

### 加壳

![2.png](http://cdn.ayusummer233.top/DailyNotes/202312280124792.jpeg)

由于基于特征码的查杀依赖于匹配恶意软件的已知特征码或签名, 因此如果将恶意软件的代码进行加密混淆("加壳"), 然后执行的时候进行动态的解密("解壳")就可以绕过这种基于特征码的静态分析

---

## 启发式分析

启发式分析是一种相较于特征码查杀更先进的`静态`检测方法, 可以用来识别尚未知晓的病毒或变种

它通过分析程序的行为和代码结构来预测其潜在恶意性

如果一个程序的行为类似已知的恶意软件, 或者试图执行可疑的操作(如修改重要的系统文件), 那么就可以标记其为潜在的威胁

![5.png](http://cdn.ayusummer233.top/DailyNotes/202312280201628.jpeg)

静态启发式分析指的实在静止状态下通过对病毒的典型指令特征识别病毒的方法, 是对传统特征码扫描的补充

在不运行病毒木马的情况下, 进行简单的反汇编, 查找, 匹配是否出现病毒木马指定的指令或者 API 函数调用序列来分析该文件是否为病毒

---

## 沙盒分析

杀软会在一个隔离的环境(沙盒)中运行程序

这允许软件观察程序的行为而不影响实际的操作系统或文件

如果程序在沙盒中表现出恶意行为, 杀毒软件会将其识别为威胁

![6.png](http://cdn.ayusummer233.top/DailyNotes/202312280206229.jpeg)

动态启发式通过杀软内置的虚拟机技术，给病毒构建一个仿真的运行环境，诱使病毒在杀软的模拟缓冲区中运行，运行过程中监控程序的行为。这种方法能够全面、有效地采集程序行为，从而综合判断程序是否是病毒

---

## 行为监测

杀软会监控系统上的活动, 寻找与恶意软件行为相似的模式; 例如大量访问个人数据可能会触发警报

![3.png](http://cdn.ayusummer233.top/DailyNotes/202312280155209.jpeg)

或者说, 当病毒木马加载到内存后, 脱去外壳, 还原为真实的数据, 此时杀软再对内存中的数据进行查杀, 匹配特征

> 和前面的启发式分析中提到的关注程序的行为需要区分
>
> - `启发式分析` 仍旧是一种静态的检测方式, 主要针对程序的代码和结构进行分析, 寻找其和已知恶意软件相似的特征
> - `行为监测` 则是动态的检测手段, 它会检测程序执行时的具体行为, 如系统调用、文件访问等，来检测恶意活动

---

## 云基础分析

许多现代杀软使用云技术来提高恶意软件检测的能力

云服务器可以存储大量的病毒信息, 提供实时更新, 并允许快速对新出现的威胁做出反应

当程序出现可疑行为但是不足以确定是病毒木马时, 为了降低误报率, 提升用户体验, 杀软一般会放行, 然后将对应的可疑文件上传到服务器进行分析; 当一个用户设备遇到新型威胁时, 这个信息可以被快速共享给其他用户, 提升整个网络的安全水平

![7.png](http://cdn.ayusummer233.top/DailyNotes/202312280207848.jpeg)



---

## AI分析

杀软公司可以依托自己庞大的病毒样本库训练病毒查杀模型~

![8.png](http://cdn.ayusummer233.top/DailyNotes/202312280210569.jpeg)

---









